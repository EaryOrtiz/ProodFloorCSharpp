@model JobViewModel
@{

    <script src="~/Scripts/CascadingCountryStateCity.js" type="text/javascript"></script>
}
<input type="hidden" asp-for="CurrentJob.JobID" />
<input type="hidden" asp-for="CurrentJob.Status" />
<input type="hidden" asp-for="CurrentJob.EngID" />
<input type="hidden" asp-for="CurrentJob.CrossAppEngID" />
<div class="form-group row">
    <label asp-for="CurrentJob.Name" class="col-sm-2 col-form-label"></label>
    <div>
        <input asp-for="CurrentJob.Name" readonly="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin")  ? false : true)" class="form-control col-sm-15" />
        <span asp-validation-for="CurrentJob.Name" class="text-danger"></span>
    </div>
</div>
<div class="form-group row">
    <label asp-for="CurrentJob.Name2" class="col-sm-2 col-form-label"></label>
    <div>
        <input asp-for="CurrentJob.Name2" readonly="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin")  ? false : true)" class="form-control col-sm-15" />
        <span asp-validation-for="CurrentJob.Name2" class="text-danger"></span>
    </div>
</div>
<div class="form-group row">
    <label asp-for="CurrentJob.JobTypeID" class="col-sm-2 col-form-label"></label>
    <div>
        <job-type-select selected-value="@Model.CurrentJob.JobTypeID" class="form-control form-control-sm" asp-is-disabled="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin")  ? false : true)" asp-for="CurrentJob.JobTypeID"></job-type-select>
        <span asp-validation-for="CurrentJob.JobTypeID" class="text-danger"></span>
    </div>
</div>
<div class="form-group row @(Model.CurrentUserID != Model.CurrentJob.EngID ? "disabled" : "disabled")">
    <label asp-for="CurrentJob.JobNum" class="col-sm-2 col-form-label"></label>
    <div>
        <input asp-for="CurrentJob.JobNum" class="form-control" readonly="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin")  ? false : true)" style="width:auto" />
        <span asp-validation-for="CurrentJob.JobNum" class="text-danger"></span>
    </div>
</div>
<div class="form-group row">
    <label asp-for="CurrentJob.ShipDate" class="col-sm-2 col-form-label"></label>
    <div>
        <input asp-for="CurrentJob.ShipDate" readonly="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin")  ? false : true)" class="form-control col-sm-15" />
        <span asp-validation-for="CurrentJob.ShipDate" class="text-danger"></span>
    </div>
</div>
<div class="form-group row">
    <label asp-for="CurrentJob.LatestFinishDate" class="col-sm-2 col-form-label"></label>
    <div>
        <input asp-for="CurrentJob.LatestFinishDate" readonly="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin")  ? false : true)" class="form-control col-sm-15" />
        <span asp-validation-for="CurrentJob.LatestFinishDate" class="text-danger"></span>
    </div>
</div>
<div class="form-group row">
    <label asp-for="CurrentJob.Cust" class="col-sm-2 col-form-label"></label>
    <div>
        <input asp-for="CurrentJob.Cust" readonly="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin")  ? false : true)" class="form-control col-sm-7" />
        <span asp-validation-for="CurrentJob.Cust" class="text-danger"></span>
    </div>
</div>
<div class="form-group row">
    <label asp-for="CurrentJob.Contractor" class="col-sm-2 col-form-label"></label>
    <div>
        <input asp-for="CurrentJob.Contractor" readonly="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin")  ? false : true)" class="form-control col-sm-7" />
        <span asp-validation-for="CurrentJob.Contractor" class="text-danger"></span>
    </div>
</div>
<div class="form-group row">
    <label asp-for="CurrentJob.CountryID" class="col-sm-2 col-form-label"></label>
    <div>
        <country-select id="CountryID" asp-for="@Model.CurrentJob.CountryID" class="form-control form-control-sm" asp-is-disabled="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin")  ? false : true)" selected-value="@Model.CurrentJob.CityID">
        </country-select>
        <span asp-validation-for="CurrentJob.CountryID" class="text-danger"></span>
    </div>
</div>
<div class="form-group row">
    <label asp-for="CurrentJob.StateID" class="col-sm-2 col-form-label"></label>
    <div>
        <state-select id="StateID" asp-for="@Model.CurrentJob.StateID" class="form-control form-control-sm" asp-is-disabled="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin")  ? false : true)" selected-value="@Model.CurrentJob.CityID">
        </state-select>
        <span asp-validation-for="CurrentJob.StateID" class="text-danger"></span>
    </div>
</div>
<div class="form-group row">
    <label asp-for="CurrentJob.CityID" class="col-sm-2 col-form-label"></label>
    <div>
        <city-select id="CityID" asp-for="@Model.CurrentJob.CityID" class="form-control form-control-sm" disabled="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin")  ? false : true)" selected-value="Model.CurrentJob.CityID">
        </city-select>
        <span asp-validation-for="CurrentJob.CityID" class="text-danger"></span>
    </div>
</div>
<div class="form-group row">
    <label asp-for="CurrentJob.FireCodeID" class="col-sm-2 col-form-label"></label>
    <div>
        <fire-code-select selected-value="@Model.CurrentJob.FireCodeID" class="form-control form-control-sm" asp-is-disabled="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin")  ? false : true)" asp-for="CurrentJob.FireCodeID"></fire-code-select>
        <span asp-validation-for="CurrentJob.FireCodeID" class="text-danger"></span>
    </div>
</div>
<div class="table-responsive table-sm">
    <table class="table table-sm form-control">
        <thead>
            <tr>
                <th style="text-align:center;width:100%">PO &nbsp;<button asp-action="AddPo" type="submit" value="AddPO" name="buttonAction" class="btn btn-success btn-sm col-sm-2" 
                style="padding-top:10px;margin-bottom:10px;min-width:100px;float:left"><i class="fa fa-plus"></i></button>
                </th>
            </tr>
        </thead>
        <tbody style="text-align:">
            @for (int i = 0; i < Model.POList.Count; i++)
            {
                @Html.HiddenFor(m => m.POList[i].JobID)
                @Html.HiddenFor(m => m.POList[i].POID)
            <tr>
                <td>
                    @Html.TextBoxFor(m => m.POList[i].PONumb, new { Class = "form-control col-sm-2;", Style = "text-align:center;" })
                </td>
                @if (Model.CurrentJob.Status != null && Model.CurrentJob.Status != "Incomplete")
                {
                    <td style="text-align:center;">
                        <form asp-action="DeletePOs" method="post">
                            <input type="hidden" asp-for="CurrentJob.JobID" />
                            <input type="hidden" name="fieldID" value="@Model.POList[i].POID" />
                            <button type="submit" disabled="@(Model.CurrentUserID == Model.CurrentJob.EngID || User.IsInRole("Admin") ? false : true)" class="btn btn-danger btn-sm">
                                <i class="fa fa-minus-circle"></i>
                            </button>
                        </form>
                    </td>
                }
            </tr>
            }
        </tbody>
    </table>
</div>